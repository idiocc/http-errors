{
"version":3,
"file":"compile/http-errors.js",
"lineCount":21,
"mappings":"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",
"sources":["node_modules/@goa/statuses/src/codes.js","node_modules/@goa/statuses/src/index.js","src/index.js","src/depack.js"],
"sourcesContent":["export default {\n  [100]: 'Continue',\n  [101]: 'Switching Protocols',\n  [102]: 'Processing',\n  [103]: 'Early Hints',\n  [200]: 'OK',\n  [201]: 'Created',\n  [202]: 'Accepted',\n  [203]: 'Non-Authoritative Information',\n  [204]: 'No Content',\n  [205]: 'Reset Content',\n  [206]: 'Partial Content',\n  [207]: 'Multi-Status',\n  [208]: 'Already Reported',\n  [226]: 'IM Used',\n  [300]: 'Multiple Choices',\n  [301]: 'Moved Permanently',\n  [302]: 'Found',\n  [303]: 'See Other',\n  [304]: 'Not Modified',\n  [305]: 'Use Proxy',\n  [306]: '(Unused)',\n  [307]: 'Temporary Redirect',\n  [308]: 'Permanent Redirect',\n  [400]: 'Bad Request',\n  [401]: 'Unauthorized',\n  [402]: 'Payment Required',\n  [403]: 'Forbidden',\n  [404]: 'Not Found',\n  [405]: 'Method Not Allowed',\n  [406]: 'Not Acceptable',\n  [407]: 'Proxy Authentication Required',\n  [408]: 'Request Timeout',\n  [409]: 'Conflict',\n  [410]: 'Gone',\n  [411]: 'Length Required',\n  [412]: 'Precondition Failed',\n  [413]: 'Payload Too Large',\n  [414]: 'URI Too Long',\n  [415]: 'Unsupported Media Type',\n  [416]: 'Range Not Satisfiable',\n  [417]: 'Expectation Failed',\n  [418]: 'I\\'m a teapot',\n  [421]: 'Misdirected Request',\n  [422]: 'Unprocessable Entity',\n  [423]: 'Locked',\n  [424]: 'Failed Dependency',\n  [425]: 'Unordered Collection',\n  [426]: 'Upgrade Required',\n  [428]: 'Precondition Required',\n  [429]: 'Too Many Requests',\n  [431]: 'Request Header Fields Too Large',\n  [451]: 'Unavailable For Legal Reasons',\n  [500]: 'Internal Server Error',\n  [501]: 'Not Implemented',\n  [502]: 'Bad Gateway',\n  [503]: 'Service Unavailable',\n  [504]: 'Gateway Timeout',\n  [505]: 'HTTP Version Not Supported',\n  [506]: 'Variant Also Negotiates',\n  [507]: 'Insufficient Storage',\n  [508]: 'Loop Detected',\n  [509]: 'Bandwidth Limit Exceeded',\n  [510]: 'Not Extended',\n  [511]: 'Network Authentication Required',\n}\n","/*!\n * statuses\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\nimport statusCodes from './codes'\n\n// status code to message map\nexport const STATUS_CODES = statusCodes\n\n// array of status codes\nexport const codes = populateStatusesMap(status, statusCodes)\n\n// status codes for redirects\nexport const redirect = {\n  [300]: true,\n  [301]: true,\n  [302]: true,\n  [303]: true,\n  [305]: true,\n  [307]: true,\n  [308]: true,\n}\n\n// status codes for empty bodies\nexport const empty = {\n  [204]: true,\n  [205]: true,\n  [304]: true,\n}\n\n// status codes for when you should retry the request\nexport const retry = {\n  [502]: true,\n  [503]: true,\n  [504]: true,\n}\n\n/**\n * Populate the statuses map for given codes.\n * @return {!Array<string>}\n * @private\n */\nfunction populateStatusesMap(statuses, allCodes) {\n  const arr = []\n\n  Object.keys(allCodes).forEach((code) => {\n    const message = statusCodes[code]\n    const s = Number(code)\n\n    // Populate properties\n    statuses[s] = message\n    statuses[message] = s\n    statuses[message.toLowerCase()] = s\n\n    // Add to array\n    arr.push(s)\n  })\n\n  return arr\n}\n\n/**\n * @param {string|number} code\n */\nexport default function status(code) {\n  if (typeof code == 'number') {\n    if (!status[code])\n      throw new Error('invalid status code: ' + code)\n    return code\n  }\n\n  if (typeof code != 'string')\n    throw new TypeError('code must be a number or string')\n\n  // '403'\n  var n = parseInt(code, 10)\n  if (!isNaN(n)) {\n    if (!status[n]) throw new Error('invalid status code: ' + n)\n    return n\n  }\n\n  n = status[code.toLowerCase()]\n  if (!n) throw new Error('invalid status message: \"' + code + '\"')\n  return n\n}\n","/*!\n * http-errors\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\nimport statuses, { codes } from '@goa/statuses'\n\nconst deprecate = (msg) => {\n  process.emitWarning(msg, 'DeprecationWarning')\n}\n\n/**\n * Get the code class of a status code.\n * @private\n */\nfunction codeClass(status) {\n  return Number(String(status).charAt(0) + '00')\n}\n\n/**\n * Create a new HTTP Error.\n * @param {...Error|string|number} args\n */\nexport default function createError(...args) {\n  // so much arity going on ~_~\n  let err\n  let msg\n  let status = 500\n  let props = {}\n  for (let i = 0; i < args.length; i++) {\n    let arg = args[i]\n    if (arg instanceof Error) {\n      err = arg\n      status = err.status || err.statusCode || status\n      continue\n    }\n    switch (typeof arg) {\n    case 'string':\n      msg = arg\n      break\n    case 'number':\n      status = arg\n      if (i !== 0) {\n        deprecate('non-first-argument status code; replace with createError(' + arg + ', ...)')\n      }\n      break\n    case 'object':\n      props = arg\n      break\n    }\n  }\n\n  if (typeof status == 'number' && (status < 400 || status >= 600)) {\n    deprecate('non-error status code; use only 4xx or 5xx status codes')\n  }\n\n  if (typeof status != 'number' ||\n    (!statuses[status] && (status < 400 || status >= 600))) {\n    status = 500\n  }\n\n  // constructor\n  const HttpError = createError[status] || createError[codeClass(status)]\n\n  if (!err) {\n    // create error\n    err = HttpError\n      ? new HttpError(msg)\n      : new Error(msg || statuses[status])\n    Error.captureStackTrace(err, createError)\n  }\n\n  if (!HttpError || !(err instanceof HttpError) || err.status !== status) {\n    // add properties to generic error\n    err.expose = status < 500\n    err.status = err.statusCode = status\n  }\n\n  for (let key in props) {\n    if (key != 'status' && key != 'statusCode') {\n      err[key] = props[key]\n    }\n  }\n\n  return err\n}\n\n/**\n * @implements {_httpErrors.HttpError}\n */\nexport class HttpError extends Error {\n  constructor(message) {\n    super()\n    this.message = message\n    this.status = null\n    this.statusCode = null\n    this.expose = false\n    this.headers = null\n  }\n  set code(code) {\n    this.status = code\n    this.statusCode = code\n    if (!this.message) this.message = statuses[code]\n  }\n}\n\ncodes.forEach((code) => {\n  let CodeError\n  const name = toIdentifier(statuses[code])\n  const className = name.match(/Error$/) ? name : name + 'Error'\n\n  switch (codeClass(code)) {\n  case 400:\n    CodeError = class ClientError extends HttpError {\n      constructor(message) {\n        super(message)\n        this.code = code\n        this.name = className\n        this.expose = true\n      }\n    }\n    break\n  case 500:\n    CodeError = class ServerError extends HttpError {\n      constructor(message) {\n        super(message)\n        this.code = code\n        this.name = className\n        this.expose = false\n      }\n    }\n    break\n  }\n\n  if (CodeError) {\n    // export the constructor\n    createError[code] = CodeError\n    createError[name] = CodeError\n  }\n}, {})\n\n\n\n/**\n * Transform the given string into a JavaScript identifier\n * @param {string} str\n */\nfunction toIdentifier(str) {\n  return str\n    .split(' ')\n    .map(function (token) {\n      return token.slice(0, 1).toUpperCase() + token.slice(1)\n    })\n    .join('')\n    .replace(/[^ _0-9a-z]/gi, '')\n}\n\n/*!\n * toidentifier\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */","import '../types/externs'\nimport httpErrors, { HttpError } from './'\n\nmodule.exports = {\n  '_HttpError': HttpError,\n  '_httpErrors': httpErrors,\n}"],
"names":["$jscompDefaultExport","codes","populateStatusesMap","statuses","status","arr","Object","keys","statusCodes","forEach","code","message","s","Number","toLowerCase","push","Error","TypeError","n","parseInt","isNaN","createError","args","err","msg","props","i","length","arg","statusCode","process","emitWarning","HttpError","String","charAt","captureStackTrace","expose","key","headers","CodeError","name","toIdentifier","className","match","str","split","map","token","slice","toUpperCase","join","replace","module","exports","httpErrors"]
}
